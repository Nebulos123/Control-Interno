<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMAS PEAJE</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* (Tu CSS completo va aquí, no necesita cambios) */
        /* --- ESTILOS GENERALES Y FONDO --- */
        body { font-family: 'Roboto', sans-serif; background: linear-gradient(-45deg, #2e3440, #3b4252, #434c5e, #4c566a); background-size: 400% 400%; animation: gradientBG 15s ease infinite; color: #eceff4; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .container { max-width: 1400px; margin: 0 auto; width: 100%;}
        
        /* --- ESTILOS LOGIN --- */
        #login-container { background-color: #434c5e; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.4); width: 100%; max-width: 400px; text-align: center; margin-top: 10vh; }
        #login-container h1 { margin-top: 0; margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .input-group input { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #4c566a; background-color: #d8dee9; color: #2e3440; font-size: 1em; box-sizing: border-box; }
        #login-button { width: 100%; padding: 12px; background-color: #88c0d0; border: none; border-radius: 6px; color: #2e3440; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
        #login-button:hover { background-color: #8fbcbb; }
        #login-button:disabled { background-color: #5e81ac; cursor: not-allowed; }
        #login-error { color: #bf616a; margin-top: 15px; font-weight: bold; display: none; }
        
        /* --- ESTILOS APP PRINCIPAL --- */
        header { background-color: rgba(46, 52, 64, 0.8); backdrop-filter: blur(5px); color: white; padding: 15px 20px; text-align: center; border-radius: 8px; margin-bottom: 25px; border-bottom: 4px solid #88c0d0; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); display: flex; justify-content: space-between; align-items: center; }
        header h1 { margin: 0; font-size: 1.8em; }
        #user-info { display: flex; align-items: center; }
        #user-role-display { background-color: #88c0d0; color: #2e3440; padding: 3px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-right: 15px; text-transform: uppercase; }
        #logout-button { background-color: #bf616a; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        
        /* --- DASHBOARD DE ESTADÍSTICAS --- */
        .dashboard-stats { display: flex; gap: 20px; margin-bottom: 25px; justify-content: space-around; }
        .stat-box { background-color: rgba(67, 76, 94, 0.8); padding: 20px; border-radius: 8px; text-align: center; flex-grow: 1; border-left: 5px solid #5e81ac; }
        .stat-box h3 { margin: 0 0 10px 0; font-size: 1em; color: #d8dee9; text-transform: uppercase; letter-spacing: 1px; }
        .stat-box .stat-number { font-size: 2.5em; font-weight: bold; color: #eceff4; }
        .stat-box#stat-problema .stat-number { color: #bf616a; }
        .stat-box#stat-revisar .stat-number { color: #ebcb8b; }
        .stat-box#stat-normal .stat-number { color: #a3be8c; }
        
        .controles-vias { background-color: rgba(67, 76, 94, 0.8); backdrop-filter: blur(5px); padding: 15px; margin-bottom: 25px; border-radius: 8px; display: flex; gap: 15px; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .controles-vias input[type="search"] { flex-grow: 1; padding: 10px; font-size: 1em; border-radius: 5px; border: 1px solid #4c566a; background-color: #d8dee9; color: #2e3440; }
        .controles-vias .filter-buttons button { padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: all 0.2s; background-color: #4c566a; color: #eceff4; }
        .controles-vias .filter-buttons button.active { transform: scale(1.05); box-shadow: 0 0 10px rgba(136, 192, 208, 0.7); }
        
        .grupo-vias { position: relative; background-color: rgba(67, 76, 94, 0.8); backdrop-filter: blur(5px); border: 1px solid #4c566a; border-radius: 12px; padding: 20px; margin-bottom: 25px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2), 0 4px 8px rgba(0,0,0,0.2); }
        .grupo-vias h2 { margin-top: 0; margin-bottom: 20px; padding-bottom: 10px; color: #eceff4; font-size: 1.3em; text-transform: uppercase; letter-spacing: 1px; border-bottom: 2px solid #5e81ac; }
        .vias-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(85px, 1fr)); gap: 18px; }

        .via-box { 
            position: relative; border-radius: 8px; padding: 18px 5px 30px 5px; text-align: center; font-size: 1.5em; font-weight: bold; cursor: pointer; color: #2e3440; border: 1px solid rgba(0, 0, 0, 0.2); border-bottom: 4px solid rgba(0, 0, 0, 0.4); text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3); transition: all 0.15s ease-out; box-sizing: border-box;
        }
        .via-box:hover { transform: translateY(-4px); filter: brightness(1.1); border-bottom-width: 6px; }
        
        .status-normal { background: linear-gradient(to bottom, #b2d89b, #a3be8c); }
        .status-revisar { background: linear-gradient(to bottom, #f0d899, #ebcb8b); }
        .status-problema { background: linear-gradient(to bottom, #c97c84, #bf616a); }
        
        .barrera-info { position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; gap: 4px; background-color: rgba(46, 52, 64, 0.7); padding: 2px 6px; border-radius: 4px; line-height: 1; }
        .barrera-info .barrera-icono { width: 14px; height: 14px; fill: #d8dee9; }
        .barrera-info .barrera-modelo-nombre { font-size: 9px; color: #eceff4; font-weight: normal; }

        .no-results-message { display: none; text-align: center; padding: 20px; font-style: italic; color: #d8dee9; }
        .grupos-secundarios-container { display: flex; gap: 25px; justify-content: space-between; margin-bottom: 25px; }
        .grupos-secundarios-container .grupo-vias { flex-grow: 1; margin-bottom: 0; }
        
        #tooltip-problema { position: absolute; padding: 10px 15px; border-radius: 6px; z-index: 1001; pointer-events: none; opacity: 0; font-size: 0.9em; max-width: 250px; text-align: left; box-shadow: 0 3px 8px rgba(0,0,0,0.3); transition: opacity 0.2s ease-in-out; }
        #tooltip-problema.visible { opacity: 1; }
        #tooltip-problema strong { display: block; margin-bottom: 5px; padding-bottom: 5px; }
        #tooltip-problema.tooltip-problema { background-color: #bf616a; color: #eceff4; }
        #tooltip-problema.tooltip-problema strong { border-bottom: 1px solid rgba(236, 239, 244, 0.5); }
        #tooltip-problema.tooltip-revisar { background-color: #ebcb8b; color: #2e3440; }
        #tooltip-problema.tooltip-revisar strong { border-bottom: 1px solid rgba(46, 52, 64, 0.5); }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); backdrop-filter: blur(5px); }
        .modal-content { background-color: #eceff4; color: #2e3440; margin: 5% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 700px; border-radius: 8px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .modal-body { display: flex; flex-direction: column; gap: 25px; }
        .tasks-section { flex: 2; }
        .form-section { flex: 1; }
        .modal-tabs { display: flex; border-bottom: 2px solid #d8dee9; margin-bottom: 15px; }
        .modal-tabs button { background: none; border: none; padding: 10px 20px; cursor: pointer; font-size: 1.1em; font-weight: bold; color: #4c566a; border-bottom: 3px solid transparent; }
        .modal-tabs button.active { color: #5e81ac; border-bottom-color: #5e81ac; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .novedades-container { min-height: 150px; max-height: 300px; overflow-y: auto; margin-top: 10px; border: 1px solid #d8dee9; border-radius: 5px; padding: 10px; position: relative; }
        .novedades-container li { background-color: #d8dee9; margin-bottom: 10px; padding: 10px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .novedad-pendiente { border-left: 5px solid #ebcb8b; }
        .novedad-resuelta { border-left: 5px solid #a3be8c; }
        .novedad-contenido { flex-grow: 1; word-break: break-word; }
        .meta-info { display: block; font-size: 0.8em; color: #4c566a; margin-bottom: 5px; }
        .meta-info.resuelta-info { color: #a3be8c; font-weight: bold; margin-top: 4px; }
        .novedad-acciones button { background: none; border: none; cursor: pointer; padding: 5px; font-size: 1.2em; border-radius: 4px; transition: transform 0.1s; }
        .novedad-acciones button:hover { transform: scale(1.2); }
        .btn-resolver { color: #a3be8c; font-weight: bold; }
        .btn-editar { color: #5e81ac; }
        .btn-eliminar { color: #bf616a; }
        .edit-container { display: flex; flex-direction: column; gap: 8px; width: 100%; }
        .edit-textarea { width: 100%; box-sizing: border-box; min-height: 60px; font-family: 'Roboto', sans-serif; font-size: 0.9em; padding: 5px; border-radius: 4px; border: 1px solid #5e81ac; }
        .edit-actions { display: flex; gap: 10px; justify-content: flex-end; }
        .edit-actions button { font-size: 0.8em; padding: 5px 10px; border-radius: 4px; color: white; cursor: pointer; border: none;}
        .btn-guardar-edicion { background-color: #a3be8c; }
        .btn-cancelar-edicion { background-color: #d08770; }
        .historial-filtros { display: flex; gap: 10px; margin-bottom: 15px; }
        #historial-search { flex-grow: 1; padding: 8px; border: 1px solid #4c566a; border-radius: 4px; }
        #historial-date-picker { padding: 8px; border: 1px solid #4c566a; border-radius: 4px; }
        .pagination-controls { text-align: center; margin-top: 15px; }
        .pagination-controls button { background-color: #5e81ac; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin: 0 5px; }
        .pagination-controls button:disabled { background-color: #4c566a; cursor: not-allowed; }
        #toast-container { position: fixed; top: 20px; right: 20px; z-index: 2000; }
        .toast { background-color: #4c566a; color: #eceff4; padding: 15px; border-radius: 5px; margin-bottom: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.2); opacity: 0; transform: translateX(100%); transition: all 0.5s ease; border-left: 5px solid #88c0d0; }
        .toast.show { opacity: 1; transform: translateX(0); }
        .toast.error { border-left-color: #bf616a; }
        .loader-container { display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(46, 52, 64, 0.7); z-index: 10; justify-content: center; align-items: center; border-radius: 12px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #88c0d0; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        #page-footer { width: 100%; max-width: 1400px; margin: 40px auto 20px auto; border-top: 1px solid #4c566a; text-align: center; padding-top: 20px; }
        .neon-text { font-size: 1.2em; font-weight: bold; color: #fff; text-shadow: 0 0 7px #fff, 0 0 10px #fff, 0 0 21px #fff, 0 0 42px #88c0d0, 0 0 82px #88c0d0, 0 0 92px #88c0d0, 0 0 102px #88c0d0, 0 0 151px #88c0d0; animation: neon-flicker 2s infinite alternate; }
        @keyframes neon-flicker { 0%, 18%, 22%, 25%, 53%, 57%, 100% { text-shadow: 0 0 4px #fff, 0 0 11px #fff, 0 0 19px #fff, 0 0 40px #88c0d0, 0 0 80px #88c0d0, 0 0 90px #88c0d0, 0 0 100px #88c0d0, 0 0 150px #88c0d0; } 20%, 24%, 55% { text-shadow: none; } }

        .busqueda-global-container { background-color: rgba(46, 52, 64, 0.8); backdrop-filter: blur(5px); padding: 20px; margin-bottom: 25px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); width: 100%; }
        .busqueda-global-input { display: flex; gap: 10px; margin-bottom: 20px; }
        .busqueda-global-input input { flex-grow: 1; padding: 12px; font-size: 1em; border-radius: 5px; border: 1px solid #4c566a; background-color: #d8dee9; color: #2e3440; }
        .busqueda-global-input button { padding: 12px 20px; background-color: #88c0d0; border: none; border-radius: 5px; color: #2e3440; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
        .busqueda-global-input button:hover { background-color: #8fbcbb; }
        #global-search-results-container h3 { margin-top: 0; border-bottom: 2px solid #5e81ac; padding-bottom: 10px; margin-bottom: 15px; }
        #global-search-results-list { list-style-type: none; padding: 0; max-height: 400px; overflow-y: auto; }
        #global-search-results-list li { background-color: #4c566a; padding: 15px; border-radius: 6px; margin-bottom: 10px; border-left: 5px solid #88c0d0; }
        .resultado-via-numero { font-weight: bold; font-size: 1.2em; color: #eceff4; background-color: #5e81ac; padding: 3px 8px; border-radius: 4px; display: inline-block; margin-right: 15px; }
        .resultado-descripcion { margin: 10px 0 0 0; color: #d8dee9; }
        .resultado-meta { font-size: 0.8em; color: #a3be8c; margin-top: 10px; display: block; }
        .resultado-meta .fecha { color: #d8dee9; font-style: italic; }
        .estado-tag { font-size: 0.8em; font-weight: bold; padding: 2px 6px; border-radius: 4px; color: #2e3440; background-color: #ebcb8b; }
        .estado-tag.resuelta { background-color: #a3be8c; }
        .form-section { padding: 15px; border: 1px solid #d8dee9; border-radius: 6px; background-color: #e5e9f0; }
        .form-section h3 { margin-top: 0; }
        .form-section label { font-size: 1.1em; margin-bottom: 8px; }
        .form-section textarea, .form-section select, .form-section button, .form-section input { font-size: 1em; padding: 10px; margin-bottom: 15px; width: 100%; box-sizing: border-box; }
        #descripcion-novedad { min-height: 120px; }
        .form-section button[type="submit"] { font-size: 1.1em; font-weight: bold; }

        #poroto-jar-container { position: fixed; bottom: 20px; right: 20px; width: 150px; text-align: center; z-index: 2000; }
        #poroto-jar { width: 100px; height: 120px; background: rgba(216, 222, 233, 0.2); border: 3px solid #d8dee9; border-radius: 5px 5px 25px 25px; margin: 0 auto; position: relative; box-shadow: inset 0 0 15px rgba(0,0,0,0.3); display: flex; align-items: flex-end; }
        #poroto-jar::before { content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 80px; height: 10px; background-color: #4c566a; border: 3px solid #d8dee9; border-radius: 5px; }
        #porotos-container { width: 100%; height: 100%; display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: 20px; gap: 2px; padding: 5px; box-sizing: border-box; align-content: end; }
        .poroto { width: 18px; height: 15px; background: linear-gradient(135deg, #c3a17a, #8e6f4d); border-radius: 50%; box-shadow: 1px 1px 3px rgba(0,0,0,0.5); animation: poroto-fall 0.5s ease-out; justify-self: center; }
        #poroto-counter { background-color: rgba(46, 52, 64, 0.8); color: #eceff4; padding: 5px 10px; border-radius: 5px; margin-top: 15px; font-weight: bold; border: 1px solid #4c566a; }
        @keyframes poroto-fall { from { transform: translateY(-120px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .jar-full-animation { animation: jar-shake 0.5s ease-in-out; }
        @keyframes jar-shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px) rotate(-2deg); } 75% { transform: translateX(5px) rotate(2deg); } }
        .poroto-exit { animation: poroto-fade-out 0.5s ease-in forwards; }
        @keyframes poroto-fade-out { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0); } }

        #preset-tasks-list { max-height: 250px; overflow-y: auto; padding-right: 10px; list-style-type: none; padding-left: 0; }
        #preset-tasks-list li { background-color: #4c566a; padding: 10px 15px; border-radius: 6px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid #88c0d0; }
        #preset-tasks-list button { background-color: #bf616a; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.9em; }

        /* --- ESTILOS PARA EL ACORDEÓN DE TAREAS PREDETERMINADAS --- */
        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .accordion-header h3 {
            margin: 0;
        }
        .accordion-toggle-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.2s, transform 0.3s ease-out;
        }
        .accordion-toggle-btn:hover {
            background-color: rgba(136, 192, 208, 0.2);
        }
        .accordion-toggle-btn svg {
            width: 20px;
            height: 20px;
            stroke: #eceff4;
            transition: transform 0.3s ease-out;
        }
        .accordion-toggle-btn.open svg {
            transform: rotate(180deg);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            padding-top: 0;
            margin-top: 0;
        }
        .accordion-content.open {
            max-height: 500px; 
            padding-top: 20px;
        }
        
        /* --- ESTILOS PARA EL GENERADOR DE REPORTES --- */
        #report-generator-container {
            background-color: rgba(46, 52, 64, 0.8);
            backdrop-filter: blur(5px);
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            width: 100%;
        }
        #report-generator-container h3 {
            margin-top: 0;
            border-bottom: 2px solid #5e81ac;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .report-controls {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .report-controls .date-picker-group {
            display: flex;
            flex-direction: column;
        }
        .report-controls label {
            font-size: 0.9em;
            margin-bottom: 5px;
            color: #d8dee9;
        }
        .report-controls input[type="date"] {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #4c566a;
            background-color: #d8dee9;
            color: #2e3440;
            font-family: 'Roboto', sans-serif;
        }
        #download-report-button {
            padding: 12px 20px;
            background-color: #a3be8c;
            border: none;
            border-radius: 5px;
            color: #2e3440;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            align-self: flex-end;
        }
        #download-report-button:hover {
            background-color: #b2d89b;
        }
        #download-report-button:disabled {
            background-color: #5e81ac;
            cursor: not-allowed;
        }

    </style>
</head>
<body>
    <div id="login-container"><h1>Iniciar Sesión</h1><form id="login-form"><div class="input-group"><label for="email">Usuario (Email)</label><input type="email" id="email" required></div><div class="input-group"><label for="password">Contraseña</label><input type="password" id="password" required></div><button type="submit" id="login-button">Acceder</button><p id="login-error">Usuario o contraseña incorrectos.</p></form></div>
    
    <div id="main-content" style="display: none; width: 100%;">
        <header><h1>CONTROL INTERNO SISTEMAS</h1><div id="user-info"><span id="user-email-display" style="margin-right: 15px; font-style: italic;"></span><span id="user-role-display"></span><button id="logout-button">Cerrar Sesión</button></div></header>
        <main class="container">
            <!-- ESTRUCTURA HTML CAMBIADA -->
            <div class="dashboard-stats"><div class="stat-box" id="stat-problema"><h3>Con Problema</h3><div class="stat-number" id="stat-count-problema">0</div></div><div class="stat-box" id="stat-revisar"><h3>Para Revisar</h3><div class="stat-number" id="stat-count-revisar">0</div></div><div class="stat-box" id="stat-normal"><h3>Normales</h3><div class="stat-number" id="stat-count-normal">0</div></div></div>
            <div class="controles-vias"><input type="search" id="search-box" placeholder="Buscar por número de vía..."><div class="filter-buttons"><button id="filter-todos" class="active">Todos</button><button id="filter-normal">Normal</button><button id="filter-revisar">Revisar</button><button id="filter-problema">Problema</button></div></div>
            
            <div class="grupo-vias" id="container-1-40"><div class="loader-container"><div class="spinner"></div></div><h2>RICCHERI (Vías 1 - 40)</h2><div id="grupo-1-40" class="vias-grid"></div><p class="no-results-message">No se encontraron vías con los filtros aplicados.</p></div>
            <div class="grupos-secundarios-container"><div class="grupo-vias" id="container-43-44"><div class="loader-container"><div class="spinner"></div></div><h2>DONOVAN (Vías 43 - 44)</h2><div id="grupo-43-44" class="vias-grid"></div><p class="no-results-message">No se encontraron vías con los filtros aplicados.</p></div><div class="grupo-vias" id="container-46-47"><div class="loader-container"><div class="spinner"></div></div><h2>BOULOGNE SUR MER (Vías 46 - 47)</h2><div id="grupo-46-47" class="vias-grid"></div><p class="no-results-message">No se encontraron vías con los filtros aplicados.</p></div><div class="grupo-vias" id="container-50-51"><div class="loader-container"><div class="spinner"></div></div><h2>MERCADO CENTRAL (Vías 50 - 51)</h2><div id="grupo-50-51" class="vias-grid"></div><p class="no-results-message">No se encontraron vías con los filtros aplicados.</p></div></div>
            
            <div class="busqueda-global-container"><div class="busqueda-global-input"><input type="search" id="global-search-box" placeholder="Buscar problema en todas las vías (ej: Contactor, Barrera...)"><button id="global-search-button">Buscar</button></div><div id="global-search-results-container" style="display: none;"><h3>Resultados de la Búsqueda</h3><div class="loader-container" id="global-search-loader" style="display: none;"><div class="spinner"></div></div><ul id="global-search-results-list"></ul><p id="no-global-results-message" style="display: none;">No se encontraron resultados para tu búsqueda.</p></div></div>

            <div id="report-generator-container" style="display: none;">
                <h3>Generación de Reportes</h3>
                <div class="report-controls">
                    <div class="date-picker-group">
                        <label for="report-start-date">Fecha de Inicio:</label>
                        <input type="date" id="report-start-date">
                    </div>
                    <div class="date-picker-group">
                        <label for="report-end-date">Fecha de Fin:</label>
                        <input type="date" id="report-end-date">
                    </div>
                    <button id="download-report-button">Descargar Reporte</button>
                </div>
            </div>
            
            <div id="admin-tasks-container" class="busqueda-global-container" style="display: none;">
                <div class="accordion-header">
                    <h3>Gestión de Tareas Predeterminadas</h3>
                    <button id="toggle-preset-tasks" class="accordion-toggle-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                </div>
                <div id="preset-tasks-content" class="accordion-content">
                    <div class="busqueda-global-input">
                        <input type="text" id="new-preset-task-input" placeholder="Escribe una nueva tarea predeterminada...">
                        <button id="add-preset-task-button">Agregar Tarea</button>
                    </div>
                    <div id="preset-tasks-list-container">
                        <div class="loader-container" id="preset-tasks-loader" style="display: none;">
                            <div class="spinner"></div>
                        </div>
                        <ul id="preset-tasks-list"></ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- (Resto del HTML de los modales y pie de página, sin cambios) -->
    <div id="modal-via" class="modal">...</div>
    <div id="toast-container"></div>
    <div id="tooltip-problema"></div>
    <div id="poroto-jar-container">...</div>
    <footer id="page-footer">...</footer>

    <script src="main.js"></script>

</body>
</html>

